



<!DOCTYPE html>
<html lang="en">
  
  <head>
    
      <meta charset="utf-8">
      <title>CVAE</title>
      
      
        
          
        
        
          

        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.0.2/math.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script> 
        <script src="cvae.js" type="text/javascript"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.2.min.js"></script>
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.2.min.js"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        
      
      
    
  </head>
  
  
  <body>
    
      
        
          
          
            
              <div class="bk-root" id="e72c36df-6022-4942-bc87-e5c96afa03f2" data-root-id="1187"></div>
            
          
        
      
      
        <script type="application/json" id="1536">
          {"14327238-893d-40f8-a173-5a3eb244c378":{"defs":[],"roots":{"references":[{"attributes":{},"id":"1063","type":"BasicTicker"},{"attributes":{"data":{"x":{"__ndarray__":"AAAAAAAAaUCdc84555xqQDrnnHPOOWxA1lprrbXWbUB0zjnnnHNvQAghhBBCiHBA1lprrbVWcUCllFJKKSVyQHTOOeec83JAQgghhBDCc0AQQgghhJB0QN977733XnVArbXWWmstdkB877333vt2QEoppZRSyndAGGOMMcaYeEDnnHPOOWd5QLbWWmutNXpAhBBCCCEEe0BSSimllNJ7QCGEEEIIoXxA77333ntvfUC+99577z1+QIwxxhhjDH9AWmuttdbaf0CUUkoppVSAQHzvvffeu4BAY4wxxhgjgUBKKaWUUoqBQDLGGGOM8YFAGGOMMcZYgkAAAAAAAMCCQA==","dtype":"float64","order":"little","shape":[32]},"y_pre":{"__ndarray__":"AAAAAAAAAAA9HdmmwumGP5jU2HeoGpc/MyUGP3lxoT9IyUhJUV+nP5wkK/m3T60/EqnE0EWesT8fM6vScZC0P7ATqA9ufLc/jFHwd5xguj/nLk8ImTu9PxxcW/QlBsA/73BcQhVpwT9AI6Z+vcbCPw7Mn6m2H8Q/T7JRrfB0xT/uHLGzdMfGP8bhaYUrGMg/VRj43bZnyT98wHYPVLbKPx74vfLFA8w/Oe9BAFdPzT/AcHS2/JfOP0EAPrKY3M8/ep/0zx2O0D8vyTtmJCvRP1R9W244xdE//jWs60hc0j9rWHzYRfDSP1kOHdAMgdM/81Etv18O1D9roLeA6ZfUPw==","dtype":"float64","order":"little","shape":[32]},"y_true":{"__ndarray__":"AAAAAAAAAABeud42UyGGP/ZOu07Zn5Y/6CgPJFJHoT8OZQu1ZF2nP7/5R76WgK0/12u8bCLQsT+/tVVB89a0P9s2a3T3zrc/tLW21x+0uj+hIW/7FoS9P/kBm7UMH8A/2VrjXFhxwT/gL+ISsrnCP/3BXUk0+cM/9Vc8sywxxT9IVtnS/mLGP779Vj4NkMc/sMqm2Ki5yD854IgoBeHJP0x/gs0xB8s/vwAtIxYtzD/wBJAUcFPNP0yvB3LUes4/gguq9LCjzz+wjwxBJ2fQP/ktOllq/dA/NJP7X6aU0T8F79Tx0izSP5UygCLcxdI/pgTMlaRf0z95zScCB/rTPw==","dtype":"float64","order":"little","shape":[32]}},"selected":{"id":"1127"},"selection_policy":{"id":"1126"}},"id":"1080","type":"ColumnDataSource"},{"attributes":{},"id":"1126","type":"UnionRenderers"},{"attributes":{},"id":"1212","type":"NoOverlap"},{"attributes":{},"id":"1067","type":"WheelZoomTool"},{"attributes":{},"id":"1056","type":"LinearScale"},{"attributes":{"label":{"value":"Modeled data"},"renderers":[{"id":"1151"}]},"id":"1163","type":"LegendItem"},{"attributes":{"source":{"id":"1080"}},"id":"1152","type":"CDSView"},{"attributes":{},"id":"1066","type":"PanTool"},{"attributes":{"coordinates":null,"group":null,"text":"Density model","text_font_size":"20px"},"id":"1004","type":"Title"},{"attributes":{"overlay":{"id":"1072"}},"id":"1068","type":"BoxZoomTool"},{"attributes":{},"id":"1010","type":"LinearScale"},{"attributes":{},"id":"1069","type":"SaveTool"},{"attributes":{},"id":"1070","type":"ResetTool"},{"attributes":{"below":[{"id":"1014"}],"center":[{"id":"1017"},{"id":"1021"}],"height":500,"left":[{"id":"1018"}],"renderers":[{"id":"1044"}],"title":{"id":"1004"},"toolbar":{"id":"1029"},"width":500,"x_range":{"id":"1006"},"x_scale":{"id":"1010"},"y_range":{"id":"1008"},"y_scale":{"id":"1012"}},"id":"1003","subtype":"Figure","type":"Plot"},{"attributes":{"coordinates":null,"group":null,"text":"Gravity data","text_font_size":"20px"},"id":"1082","type":"Title"},{"attributes":{"color_mapper":{"id":"1036"},"dh":{"value":800},"dw":{"value":800},"global_alpha":{"value":0.1},"image":{"field":"image"},"x":{"value":0},"y":{"value":-800}},"id":"1040","type":"Image"},{"attributes":{"range_padding":0},"id":"1008","type":"DataRange1d"},{"attributes":{"bottom_units":"screen","coordinates":null,"fill_alpha":0.5,"fill_color":"lightgrey","group":null,"left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1072","type":"BoxAnnotation"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":45,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1180","type":"CustomJS"},{"attributes":{"coordinates":null,"data_source":{"id":"1080"},"glyph":{"id":"1114"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1116"},"nonselection_glyph":{"id":"1115"},"view":{"id":"1118"}},"id":"1117","type":"GlyphRenderer"},{"attributes":{},"id":"1104","type":"HelpTool"},{"attributes":{"tools":[{"id":"1066"},{"id":"1067"},{"id":"1068"},{"id":"1069"},{"id":"1070"},{"id":"1071"}]},"id":"1073","type":"Toolbar"},{"attributes":{"children":[{"id":"1081"},{"id":"1184"}]},"id":"1185","type":"Column"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":48,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1164","type":"CustomJS"},{"attributes":{"children":[{"id":"1165"},{"id":"1167"},{"id":"1169"},{"id":"1171"},{"id":"1173"},{"id":"1175"},{"id":"1177"},{"id":"1179"},{"id":"1181"},{"id":"1183"}]},"id":"1186","type":"Column"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1164"}]},"start":-2,"step":0.1,"title":"z1","value":0},"id":"1165","type":"Slider"},{"attributes":{"children":[{"id":"1185"},{"id":"1186"}]},"id":"1187","type":"Row"},{"attributes":{"children":[{"id":"1003"},{"id":"1047"}]},"id":"1184","type":"Row"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":18,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1182","type":"CustomJS"},{"attributes":{"bottom_units":"screen","coordinates":null,"fill_alpha":0.5,"fill_color":"lightgrey","group":null,"left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1105","type":"BoxAnnotation"},{"attributes":{},"id":"1201","type":"BasicTickFormatter"},{"attributes":{"data":{"image":[{"__ndarray__":"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","dtype":"float64","order":"little","shape":[32,32]}]},"selected":{"id":"1214"},"selection_policy":{"id":"1213"}},"id":"1002","type":"ColumnDataSource"},{"attributes":{},"id":"1092","type":"BasicTicker"},{"attributes":{},"id":"1202","type":"AllLabels"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":24,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1168","type":"CustomJS"},{"attributes":{"line_alpha":0.2,"line_color":"#1f77b4","line_width":3,"x":{"field":"x"},"y":{"field":"y_true"}},"id":"1116","type":"Line"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1168"}]},"start":-2,"step":0.1,"title":"z3","value":0},"id":"1169","type":"Slider"},{"attributes":{},"id":"1204","type":"BasicTickFormatter"},{"attributes":{"coordinates":null,"data_source":{"id":"1080"},"glyph":{"id":"1148"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1150"},"nonselection_glyph":{"id":"1149"},"view":{"id":"1152"}},"id":"1151","type":"GlyphRenderer"},{"attributes":{"axis_label":"Elevation, m","coordinates":null,"formatter":{"id":"1201"},"group":null,"major_label_policy":{"id":"1202"},"ticker":{"id":"1019"}},"id":"1018","type":"LinearAxis"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1166"}]},"start":-2,"step":0.1,"title":"z2","value":0},"id":"1167","type":"Slider"},{"attributes":{},"id":"1205","type":"AllLabels"},{"attributes":{"axis_label":"Distance, m","coordinates":null,"formatter":{"id":"1204"},"group":null,"major_label_policy":{"id":"1205"},"ticker":{"id":"1015"}},"id":"1014","type":"LinearAxis"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":49,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1170","type":"CustomJS"},{"attributes":{},"id":"1015","type":"BasicTicker"},{"attributes":{"axis_label":"Gravity, mGal","coordinates":null,"formatter":{"id":"1121"},"group":null,"major_label_policy":{"id":"1122"},"ticker":{"id":"1096"}},"id":"1095","type":"LinearAxis"},{"attributes":{"axis":{"id":"1014"},"coordinates":null,"grid_line_color":null,"group":null,"ticker":null},"id":"1017","type":"Grid"},{"attributes":{},"id":"1087","type":"LinearScale"},{"attributes":{"coordinates":null,"data_source":{"id":"1002"},"glyph":{"id":"1038"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1042"},"nonselection_glyph":{"id":"1040"},"view":{"id":"1045"}},"id":"1044","type":"GlyphRenderer"},{"attributes":{},"id":"1027","type":"HelpTool"},{"attributes":{"axis":{"id":"1091"},"coordinates":null,"group":null,"ticker":null},"id":"1094","type":"Grid"},{"attributes":{"below":[{"id":"1091"}],"center":[{"id":"1094"},{"id":"1098"},{"id":"1129"}],"height":300,"left":[{"id":"1095"}],"renderers":[{"id":"1117"},{"id":"1135"},{"id":"1151"}],"title":{"id":"1082"},"toolbar":{"id":"1106"},"width":500,"x_range":{"id":"1006"},"x_scale":{"id":"1087"},"y_range":{"id":"1085"},"y_scale":{"id":"1089"}},"id":"1081","subtype":"Figure","type":"Plot"},{"attributes":{"label":{"value":"True data"},"renderers":[{"id":"1117"},{"id":"1135"}]},"id":"1130","type":"LegendItem"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1182"}]},"start":-2,"step":0.1,"title":"z10","value":0},"id":"1183","type":"Slider"},{"attributes":{},"id":"1103","type":"ResetTool"},{"attributes":{},"id":"1012","type":"LinearScale"},{"attributes":{"axis_label":"Distance, m","coordinates":null,"formatter":{"id":"1124"},"group":null,"major_label_policy":{"id":"1125"},"ticker":{"id":"1092"}},"id":"1091","type":"LinearAxis"},{"attributes":{"coordinates":null,"data_source":{"id":"1080"},"glyph":{"id":"1132"},"group":null,"hover_glyph":null,"muted_glyph":{"id":"1134"},"nonselection_glyph":{"id":"1133"},"view":{"id":"1136"}},"id":"1135","type":"GlyphRenderer"},{"attributes":{},"id":"1210","type":"BasicTickFormatter"},{"attributes":{},"id":"1089","type":"LinearScale"},{"attributes":{},"id":"1102","type":"SaveTool"},{"attributes":{"fill_color":{"value":"#1f77b4"},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y_true"}},"id":"1132","type":"Circle"},{"attributes":{},"id":"1124","type":"BasicTickFormatter"},{"attributes":{"axis":{"id":"1018"},"coordinates":null,"dimension":1,"grid_line_color":null,"group":null,"ticker":null},"id":"1021","type":"Grid"},{"attributes":{},"id":"1019","type":"BasicTicker"},{"attributes":{},"id":"1214","type":"Selection"},{"attributes":{},"id":"1052","type":"DataRange1d"},{"attributes":{},"id":"1125","type":"AllLabels"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1180"}]},"start":-2,"step":0.1,"title":"z9","value":0},"id":"1181","type":"Slider"},{"attributes":{"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"hatch_alpha":{"value":0.1},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y_true"}},"id":"1133","type":"Circle"},{"attributes":{"range_padding":0},"id":"1006","type":"DataRange1d"},{"attributes":{"source":{"id":"1080"}},"id":"1136","type":"CDSView"},{"attributes":{},"id":"1023","type":"WheelZoomTool"},{"attributes":{},"id":"1085","type":"DataRange1d"},{"attributes":{"overlay":{"id":"1105"}},"id":"1101","type":"BoxZoomTool"},{"attributes":{},"id":"1022","type":"PanTool"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1174"}]},"start":-2,"step":0.1,"title":"z6","value":0},"id":"1175","type":"Slider"},{"attributes":{"fill_alpha":{"value":0.2},"fill_color":{"value":"#1f77b4"},"hatch_alpha":{"value":0.2},"line_alpha":{"value":0.2},"line_color":{"value":"#1f77b4"},"x":{"field":"x"},"y":{"field":"y_true"}},"id":"1134","type":"Circle"},{"attributes":{"overlay":{"id":"1028"}},"id":"1024","type":"BoxZoomTool"},{"attributes":{},"id":"1121","type":"BasicTickFormatter"},{"attributes":{"color_mapper":{"id":"1036"},"dh":{"value":800},"dw":{"value":800},"image":{"field":"image"},"x":{"value":0},"y":{"value":-800}},"id":"1038","type":"Image"},{"attributes":{},"id":"1025","type":"SaveTool"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":34,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1172","type":"CustomJS"},{"attributes":{"color_mapper":{"id":"1036"},"dh":{"value":800},"dw":{"value":800},"global_alpha":{"value":0.2},"image":{"field":"image"},"x":{"value":0},"y":{"value":-800}},"id":"1042","type":"Image"},{"attributes":{},"id":"1026","type":"ResetTool"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":19,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1166","type":"CustomJS"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1170"}]},"start":-2,"step":0.1,"title":"z4","value":0},"id":"1171","type":"Slider"},{"attributes":{"line_color":"orange","line_width":3,"x":{"field":"x"},"y":{"field":"y_pre"}},"id":"1148","type":"Line"},{"attributes":{},"id":"1099","type":"PanTool"},{"attributes":{},"id":"1100","type":"WheelZoomTool"},{"attributes":{},"id":"1213","type":"UnionRenderers"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1172"}]},"start":-2,"step":0.1,"title":"z5","value":0},"id":"1173","type":"Slider"},{"attributes":{},"id":"1122","type":"AllLabels"},{"attributes":{"axis":{"id":"1095"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1098","type":"Grid"},{"attributes":{},"id":"1096","type":"BasicTicker"},{"attributes":{"bottom_units":"screen","coordinates":null,"fill_alpha":0.5,"fill_color":"lightgrey","group":null,"left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","syncable":false,"top_units":"screen"},"id":"1028","type":"BoxAnnotation"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":41,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1174","type":"CustomJS"},{"attributes":{"source":{"id":"1002"}},"id":"1045","type":"CDSView"},{"attributes":{"coordinates":null,"group":null,"items":[{"id":"1130"},{"id":"1163"}],"location":"top_left"},"id":"1129","type":"Legend"},{"attributes":{"below":[{"id":"1058"}],"center":[{"id":"1061"},{"id":"1065"},{"id":"1046"}],"height":456,"left":[{"id":"1062"}],"min_border":0,"outline_line_color":null,"title":{"id":"1048"},"title_location":"right","toolbar":{"id":"1073"},"toolbar_location":null,"width":100,"x_range":{"id":"1050"},"x_scale":{"id":"1054"},"y_range":{"id":"1052"},"y_scale":{"id":"1056"}},"id":"1047","subtype":"Figure","type":"Plot"},{"attributes":{"tools":[{"id":"1022"},{"id":"1023"},{"id":"1024"},{"id":"1025"},{"id":"1026"},{"id":"1027"}]},"id":"1029","type":"Toolbar"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":37,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1176","type":"CustomJS"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":3,"x":{"field":"x"},"y":{"field":"y_true"}},"id":"1115","type":"Line"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1176"}]},"start":-2,"step":0.1,"title":"z7","value":0},"id":"1177","type":"Slider"},{"attributes":{},"id":"1050","type":"DataRange1d"},{"attributes":{"high":1,"low":-1,"palette":["#440154","#440255","#440357","#450558","#45065A","#45085B","#46095C","#460B5E","#460C5F","#460E61","#470F62","#471163","#471265","#471466","#471567","#471669","#47186A","#48196B","#481A6C","#481C6E","#481D6F","#481E70","#482071","#482172","#482273","#482374","#472575","#472676","#472777","#472878","#472A79","#472B7A","#472C7B","#462D7C","#462F7C","#46307D","#46317E","#45327F","#45347F","#453580","#453681","#443781","#443982","#433A83","#433B83","#433C84","#423D84","#423E85","#424085","#414186","#414286","#404387","#404487","#3F4587","#3F4788","#3E4888","#3E4989","#3D4A89","#3D4B89","#3D4C89","#3C4D8A","#3C4E8A","#3B508A","#3B518A","#3A528B","#3A538B","#39548B","#39558B","#38568B","#38578C","#37588C","#37598C","#365A8C","#365B8C","#355C8C","#355D8C","#345E8D","#345F8D","#33608D","#33618D","#32628D","#32638D","#31648D","#31658D","#31668D","#30678D","#30688D","#2F698D","#2F6A8D","#2E6B8E","#2E6C8E","#2E6D8E","#2D6E8E","#2D6F8E","#2C708E","#2C718E","#2C728E","#2B738E","#2B748E","#2A758E","#2A768E","#2A778E","#29788E","#29798E","#287A8E","#287A8E","#287B8E","#277C8E","#277D8E","#277E8E","#267F8E","#26808E","#26818E","#25828E","#25838D","#24848D","#24858D","#24868D","#23878D","#23888D","#23898D","#22898D","#228A8D","#228B8D","#218C8D","#218D8C","#218E8C","#208F8C","#20908C","#20918C","#1F928C","#1F938B","#1F948B","#1F958B","#1F968B","#1E978A","#1E988A","#1E998A","#1E998A","#1E9A89","#1E9B89","#1E9C89","#1E9D88","#1E9E88","#1E9F88","#1EA087","#1FA187","#1FA286","#1FA386","#20A485","#20A585","#21A685","#21A784","#22A784","#23A883","#23A982","#24AA82","#25AB81","#26AC81","#27AD80","#28AE7F","#29AF7F","#2AB07E","#2BB17D","#2CB17D","#2EB27C","#2FB37B","#30B47A","#32B57A","#33B679","#35B778","#36B877","#38B976","#39B976","#3BBA75","#3DBB74","#3EBC73","#40BD72","#42BE71","#44BE70","#45BF6F","#47C06E","#49C16D","#4BC26C","#4DC26B","#4FC369","#51C468","#53C567","#55C666","#57C665","#59C764","#5BC862","#5EC961","#60C960","#62CA5F","#64CB5D","#67CC5C","#69CC5B","#6BCD59","#6DCE58","#70CE56","#72CF55","#74D054","#77D052","#79D151","#7CD24F","#7ED24E","#81D34C","#83D34B","#86D449","#88D547","#8BD546","#8DD644","#90D643","#92D741","#95D73F","#97D83E","#9AD83C","#9DD93A","#9FD938","#A2DA37","#A5DA35","#A7DB33","#AADB32","#ADDC30","#AFDC2E","#B2DD2C","#B5DD2B","#B7DD29","#BADE27","#BDDE26","#BFDF24","#C2DF22","#C5DF21","#C7E01F","#CAE01E","#CDE01D","#CFE11C","#D2E11B","#D4E11A","#D7E219","#DAE218","#DCE218","#DFE318","#E1E318","#E4E318","#E7E419","#E9E419","#ECE41A","#EEE51B","#F1E51C","#F3E51E","#F6E61F","#F8E621","#FAE622","#FDE724"]},"id":"1036","type":"LinearColorMapper"},{"attributes":{"color_mapper":{"id":"1036"},"coordinates":null,"group":null,"height":398,"location":[0,0],"major_label_policy":{"id":"1212"}},"id":"1046","type":"ColorBar"},{"attributes":{"line_color":"#1f77b4","line_width":3,"x":{"field":"x"},"y":{"field":"y_true"}},"id":"1114","type":"Line"},{"attributes":{"coordinates":null,"formatter":{"id":"1210"},"group":null,"major_label_policy":{"id":"1211"},"ticker":{"id":"1059"}},"id":"1058","type":"LinearAxis"},{"attributes":{"coordinates":null,"formatter":{"id":"1207"},"group":null,"major_label_policy":{"id":"1208"},"ticker":{"id":"1063"}},"id":"1062","type":"LinearAxis"},{"attributes":{},"id":"1208","type":"AllLabels"},{"attributes":{},"id":"1207","type":"BasicTickFormatter"},{"attributes":{},"id":"1059","type":"BasicTicker"},{"attributes":{"end":2,"js_property_callbacks":{"change:value":[{"id":"1178"}]},"start":-2,"step":0.1,"title":"z8","value":0},"id":"1179","type":"Slider"},{"attributes":{"axis":{"id":"1058"},"coordinates":null,"group":null,"ticker":null},"id":"1061","type":"Grid"},{"attributes":{"align":"center","coordinates":null,"group":null,"text":"density, g/cm\u00b3","text_font_size":"16px"},"id":"1048","type":"Title"},{"attributes":{},"id":"1054","type":"LinearScale"},{"attributes":{},"id":"1211","type":"AllLabels"},{"attributes":{},"id":"1071","type":"HelpTool"},{"attributes":{},"id":"1127","type":"Selection"},{"attributes":{"tools":[{"id":"1099"},{"id":"1100"},{"id":"1101"},{"id":"1102"},{"id":"1103"},{"id":"1104"}]},"id":"1106","type":"Toolbar"},{"attributes":{"args":{"data_source":{"id":"1080"},"iz":39,"model_source":{"id":"1002"}},"code":"\nvar model = model_source.data;\nvar y_true = data_source[\"data\"][\"y_true\"];\nvar y_pre = data_source[\"data\"][\"y_pre\"];\nvar f = cb_obj.value;\nzd[iz] = f;\n\nvar predict = function(input) {\n    if (net) {\n        net.predict(tf.tensor2d(input, [1,82])).array().then(function(output) {\n            output = output[0];\n            // console.log(output[0].toString());\n            var m = model['image'];\n            // console.log(m[0].length.toString())\n            // console.log(output.length.toString())\n            var ni = output.length;\n            // Assume all output[i] are of equal length\n            var nj = output[0].length;\n            var ij = 0;\n            var im = 0;\n            for (var i = 0; i &lt; ni; i++) {\n                for (var j = 0; j &lt; nj; j++){\n                    // ij = i*output[i].length + j;\n                    // im = ni*nj - ij - 1;\n                    im = j + (ni - i - 1)*nj\n                    m[0][im] = output[i][j];\n                }\n            }\n            model_source.change.emit();\n            const nd = y_pre.length;\n            // transform model from tanh to density\n            // m/2.25 + 2.4\n            const m_matrix = math.add(math.divide(math.matrix(Array.from(m[0])), 2.25), 2.4);\n            // console.log(math.size(G));\n            // console.log(math.size(m_matrix));\n            const d_pre = math.multiply(G,m_matrix);\n            for (var ii = 0; ii &lt; nd; ii++) {\n                // replot true data\n                y_true[ii] = zd[ii+50];\n                y_pre[ii] = math.subset(d_pre, math.index(ii));\n            }\n            data_source.change.emit();\n        });\n    } else {\n        console.log(\"No net yet...\");\n        setTimeout(function(){predict(input)}, 100);\n    }\n}\npredict(zd);\n"},"id":"1178","type":"CustomJS"},{"attributes":{"line_alpha":0.1,"line_color":"orange","line_width":3,"x":{"field":"x"},"y":{"field":"y_pre"}},"id":"1149","type":"Line"},{"attributes":{"source":{"id":"1080"}},"id":"1118","type":"CDSView"},{"attributes":{"line_alpha":0.2,"line_color":"orange","line_width":3,"x":{"field":"x"},"y":{"field":"y_pre"}},"id":"1150","type":"Line"},{"attributes":{"axis":{"id":"1062"},"coordinates":null,"dimension":1,"group":null,"ticker":null},"id":"1065","type":"Grid"}],"root_ids":["1187"]},"title":"Bokeh Application","version":"2.4.2"}}
        </script>
        <script type="text/javascript">
          (function() {
            const fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {
                    
                  const docs_json = document.getElementById('1536').textContent;
                  const render_items = [{"docid":"14327238-893d-40f8-a173-5a3eb244c378","root_ids":["1187"],"roots":{"1187":"e72c36df-6022-4942-bc87-e5c96afa03f2"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);
                
                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    let attempts = 0;
                    const timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        clearInterval(timer);
                        embed_document(root);
                      } else {
                        attempts++;
                        if (attempts > 100) {
                          clearInterval(timer);
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        }
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>
    
  </body>
  
</html>